<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portal de Fomento à Pesquisa IME</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        /* Estilos customizados para melhorar a aparência */
        body {
            background-color: #f8f9fa;
        }
        .header-ime {
            background-color: #004d99; /* Cor azul IME/Marinha (exemplo) */
            color: white;
            padding: 20px 0;
            margin-bottom: 30px;
        }
    </style>
</head>
<body>

    <header class="header-ime text-center">
        <h1>Portal de Fomento à Pesquisa</h1>
        <p class="lead">Dr. João Silva | Usuário Associado</p>
    </header>

    <div class="container">
        <div class="row mb-4">
            <div class="col-md-8">
                <div class="card p-3 shadow-sm">
                    <label for="selectLinha" class="form-label fs-5">
                        **1. Selecione Sua Linha de Pesquisa (Requisito Principal)**
                    </label>
                    <select id="selectLinha" class="form-select form-select-lg" onchange="carregarEditais()">
                        <option value="">-- Escolha uma Linha de Pesquisa --</option>
                        <option value="algoritmos">Algoritmos e Teoria da Computação</option>
                        <option value="sistemas">Modelagem e Análise de Sistemas Dinâmicos</option>
                        <option value="otimizacao">Otimização e Pesquisa Operacional</option>
                        <option value="grafos">Teoria dos Grafos e Combinatória</option>
                    </select>
                </div>
            </div>

            <div class="col-md-4 d-grid gap-2">
                <a href="#" class="btn btn-outline-primary btn-lg mt-4">
                    **2. Cadastrar Novas Linhas/Usuários**
                </a>
                <small class="text-muted text-center">Incremento solicitado</small>
            </div>
        </div>

        <hr>

        <h2 class="mt-4 mb-3">3. Sugestões de Editais Apropriados (Ordenados por Relevância)</h2>

        <div class="alert alert-info" id="mensagemAguarde" role="alert">
            Selecione uma linha de pesquisa acima para carregar os editais e seus scores de relevância.
        </div>

        <div class="table-responsive">
            <table class="table table-striped table-hover shadow-sm" id="tabelaEditais" style="display:none;">
                <thead class="table-dark">
                    <tr>
                        <th>Edital de Fomento</th>
                        <th>Agência</th>
                        <th>Data Limite</th>
                        <th>Score de Relevância (IA)</th>
                        <th>Ação</th>
                    </tr>
                </thead>
                <tbody id="corpoTabela">
                    </tbody>
            </table>
        </div>

    </div>

    <script>
        // Simulação dos dados de editais (o back-end real faria isso)
        const dadosEditais = {
            algoritmos: [
                { nome: "Chamada Universal CNPq 2026", agencia: "CNPq", data: "15/10/2025", score: 92 },
                { nome: "Pesquisa Básica em IA", agencia: "FAPESP", data: "20/11/2025", score: 88 },
                { nome: "Apoio a Jovens Pesquisadores", agencia: "CAPES", data: "30/11/2025", score: 75 },
            ],
            sistemas: [
                { nome: "Modelagem Aplicada", agencia: "FINEP", data: "05/10/2025", score: 98 },
                { nome: "Sistemas Complexos", agencia: "FAPERJ", data: "10/12/2025", score: 85 },
                { nome: "Chamada Universal CNPq 2026", agencia: "CNPq", data: "15/10/2025", score: 60 },
            ],
            otimizacao: [
                { nome: "Logística e Otimização 2025", agencia: "BNDES", data: "01/10/2025", score: 95 },
                { nome: "Pesquisa Operacional", agencia: "CNPq", data: "01/12/2025", score: 89 },
            ],
            grafos: [
                { nome: "Teoria da Informação", agencia: "FAPESP", data: "25/11/2025", score: 91 },
            ]
        };

        function carregarEditais() {
            const linhaSelecionada = document.getElementById('selectLinha').value;
            const corpoTabela = document.getElementById('corpoTabela');
            const tabela = document.getElementById('tabelaEditais');
            const mensagem = document.getElementById('mensagemAguarde');
            
            corpoTabela.innerHTML = ''; // Limpa resultados anteriores
            tabela.style.display = 'none';

            if (!linhaSelecionada) {
                mensagem.style.display = 'block';
                return;
            }

            mensagem.style.display = 'none';

            let editais = dadosEditais[linhaSelecionada] || [];

            // GARANTIR A ORDENAÇÃO POR RELEVÂNCIA (Do maior score para o menor)
            editais.sort((a, b) => b.score - a.score);

            if (editais.length === 0) {
                corpoTabela.innerHTML = '<tr><td colspan="5" class="text-center">Nenhum edital encontrado para esta linha.</td></tr>';
            } else {
                editais.forEach(edital => {
                    const corScore = edital.score >= 90 ? 'text-success fw-bold' : edital.score >= 70 ? 'text-warning fw-bold' : 'text-muted';
                    const linha = `
                        <tr>
                            <td>${edital.nome}</td>
                            <td>${edital.agencia}</td>
                            <td>${edital.data}</td>
                            <td class="${corScore}">${edital.score}%</td>
                            <td><button class="btn btn-sm btn-info">Detalhes</button></td>
                        </tr>
                    `;
                    corpoTabela.innerHTML += linha;
                });
            }
            
            tabela.style.display = 'table';
        }
    </script>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>